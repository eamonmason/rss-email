<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{subject}</title>
    <meta charset="UTF-8" />
    <style>
      body {{
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }}

      .container {{
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        padding: 30px;
      }}

      h1 {{
        color: #2c3e50;
        border-bottom: 3px solid #3498db;
        padding-bottom: 10px;
        margin-bottom: 30px;
      }}

      .metadata {{
        font-size: 0.9em;
        color: #666;
        margin-bottom: 20px;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 4px;
      }}

      .category-section {{
        margin-bottom: 40px;
      }}

      .category-header {{
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 12px 20px;
        border-radius: 6px;
        margin-bottom: 20px;
        font-size: 1.2em;
        font-weight: bold;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }}

      /* Tech categories get special styling */
      .category-technology {{
        background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
      }}

      .category-aiml {{
        background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
      }}

      .category-cybersecurity {{
        background: linear-gradient(135deg, #F44336 0%, #D32F2F 100%);
      }}

      .category-programming {{
        background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
      }}

      .category-science {{
        background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
      }}

      .article {{
        background-color: #f8f9fa;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin-bottom: 15px;
        border-radius: 4px;
        transition: all 0.3s ease;
      }}

      .article:hover {{
        background-color: #e9ecef;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        transform: translateX(5px);
      }}

      .article-title {{
        font-weight: bold;
        margin-bottom: 8px;
      }}

      .article-title a {{
        color: #2c3e50;
        text-decoration: none;
        font-size: 1.1em;
      }}

      .article-title a:hover {{
        color: #3498db;
        text-decoration: underline;
      }}

      .article-meta {{
        font-size: 0.85em;
        color: #666;
        margin-bottom: 10px;
      }}

      .article-summary {{
        color: #555;
        margin-bottom: 10px;
        line-height: 1.5;
      }}

      .article-description {{
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid #dee2e6;
        font-size: 0.9em;
        color: #666;
        display: none;
      }}

      .show-more {{
        color: #3498db;
        cursor: pointer;
        font-size: 0.9em;
        text-decoration: underline;
        display: inline-block;
        margin-top: 5px;
      }}

      .show-more:hover {{
        color: #2980b9;
      }}

      .related-articles {{
        margin-top: 10px;
        padding: 8px;
        background-color: #e9ecef;
        border-radius: 4px;
        font-size: 0.85em;
      }}

      .related-articles-label {{
        font-weight: bold;
        color: #666;
        margin-right: 5px;
      }}

      .related-link {{
        color: #3498db;
        text-decoration: none;
        margin-right: 10px;
      }}

      .related-link:hover {{
        text-decoration: underline;
      }}

      .footer {{
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid #dee2e6;
        text-align: center;
        color: #666;
        font-size: 0.9em;
      }}

      @media (max-width: 600px) {{
        body {{
          padding: 10px;
        }}
        
        .container {{
          padding: 20px;
        }}
        
        .article {{
          padding: 12px;
        }}
      }}
    </style>
    <script>
      function toggleDescription(id) {{
        var desc = document.getElementById('desc-' + id);
        var link = document.getElementById('toggle-' + id);
        if (desc.style.display === 'none' || desc.style.display === '') {{
          desc.style.display = 'block';
          link.textContent = 'Show less';
        }} else {{
          desc.style.display = 'none';
          link.textContent = 'Show more';
        }}
      }}
    </script>
  </head>
  <body>
    <div class="container">
      <h1>{subject}</h1>
      
      <div class="metadata">
        <strong>Generated:</strong> {generation_time}<br>
        <strong>Articles processed:</strong> {total_articles}<br>
        <strong>Categories:</strong> {total_categories}
      </div>

      {categorized_content}

      <div class="footer">
        <p>This email was intelligently categorized and summarized using AI.</p>
      </div>
    </div>
  </body>
</html>
